<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Sun Mar 31 2019 21:38:41 GMT+0000 (UTC)  -->
<html data-wf-page="5ca1250ff4c36e55db7fda72" data-wf-site="5ca1250ff4c36e770f7fda71"ã€€xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>read</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/read.css" rel="stylesheet" type="text/css">
  <link href="css/collapse.css" rel="stylesheet" type="text/css">
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png" rel="apple-touch-icon">
  <style>
    .collapsible {
      background-color: #14305e;
      color: white;
      cursor: pointer;
      padding: 5px;
      width: 100%;
      border: none;
      text-align: center;
      outline: none;
      font-size: 18px;
    }

    .active, .collapsible:hover {
      background-color: #555;
    }

    .content {
      padding: 0 18px;
      display: none;
      overflow: hidden;
      background-color: #f1f1f1;
    }
    input[type=text], select, textarea {
      width: 100%; /* Full width */
      padding: 12px; /* Some padding */
      border: 1px solid #ccc; /* Gray border */
      border-radius: 4px; /* Rounded borders */
      box-sizing: border-box; /* Make sure that padding and width stays in place */
      margin-top: 6px; /* Add a top margin */
      margin-bottom: 16px; /* Bottom margin */
      resize: vertical /* Allow the user to vertically resize the textarea (not horizontally) */
    }

    /* Style the submit button with a specific background color etc */
    input[type=submit] {
      background-color: #4CAF50;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    /* When moving the mouse over the submit button, add a darker green color */
    input[type=submit]:hover {
      background-color: #45a049;
    }

    /* Add a background color and some padding around the form */
    .containers {
      border-radius: 5px;
      background-color: #f2f2f2;
      padding: 20px;
    }
  </style>

</head>
<body class="body">
<div id="Topbar" class="topbar w-container">
  <a id="Home" href="home" class="button-14 w-button">Home</a>
  <a id="PersonalCenter" href="personal" class="button-2 w-button">Personal Center</a>
  <a id="Message" href="message" class="button-3 w-button"><span>Message</span><span class="badge"><span th:text="${session.messagenum}"></span></span></a>
  <a id="Favorite" href="favorite" class="button-2 w-button">Favorite</a>
  <a id="History" href="history" class="button-2 w-button">History</a>
  <a id="LogOut" href="login" class="button-2 w-button">Log out</a>
</div>


<div id="chapterToolbar" class="columns w-row">
  <div class="w-col w-col-3"><a id="previousChapter"  class="button-15 w-button" onmousedown="changechapter(1)">Previous Chapter</a></div>
  <div class="w-col w-col-4">
    <div id="title" class="text-block"><span th:text="${session.series.getName()}"></span></div>
  </div>
  <div class="w-col w-col-2">
    <div id="chapter" class="text-block-2">Chapter <span th:text="${session.comicindex}"></span></div>
  </div>
  <div class="w-col w-col-3"><a id="nextChapter"  class="button-15 w-button" onmousedown="changechapter(2)">Next Chapter</a></div>
</div>

  <div th:if="${session.page == null}">404</div>
  <div th:if="${session.page != null}">
  <img th:src="${session.pagecontent}" alt="" class="image"  onmousedown="changePage(event)">
<script  th:inline="javascript">
  function changePage(e){
    console.log(e.pageX,e.pageY);
    console.log(screen.width,screen.height);
    var index= /*[[${session.page.getIndexs()}]]*/ 100;
    var comicid=/*[[${session.page.getComicid()}]]*/ 100;
    var pagenumber =/*[[${session.pagenumber}]]*/ 100;
    if(e.pageX<=screen.width/2){
      if(index==1){
        alert("This is the first page of this charpter.");
      }
      else {
        index = index - 1;
        console.log("/read?id=" + comicid + "&index=" + index);
        window.location.href = "/read?id=" + comicid + "&index=" + index;
      }
    }
    else{
      if(index==pagenumber){
        alert("This is the last page of this charpter.");
      }
      else {
        index = index + 1;
        window.location.href = "/read?id=" + comicid + "&index=" + index;
      }
    }
  }

  function changePage2(e){
    var index= /*[[${session.page.getIndexs()}]]*/ 100;
    var comicid=/*[[${session.page.getComicid()}]]*/ 100;
    var pagenumber =/*[[${session.pagenumber}]]*/ 100;
    if(e==1){
      if(index==1){
        alert("This is the first page of this charpter.");
      }
      else {
        index = index - 1;
        console.log("/read?id=" + comicid + "&index=" + index);
        window.location.href = "/read?id=" + comicid + "&index=" + index;
      }
    }
    else{
      if(index==pagenumber){
        alert("This is the last page of this charpter.");
      }
      else {
        index = index + 1;
        window.location.href = "/read?id=" + comicid + "&index=" + index;
      }
    }
  }

  function changechapter(e){
    var index= 1;
    var comicid=/*[[${session.page.getComicid()}]]*/ 100;
    var comicindex=/*[[${session.comicindex}]]*/ 100;
    var chapter =/*[[${session.pagenumber}]]*/ 100;
    var chapternumber=/*[[${session.chapternumber}]]*/ 100;
    var nextchapterid = /*[[${session.nextchapterid}]]*/ 100;
    var previouschapterid = /*[[${session.previouschapterid}]]*/ 100;
    if(e==1){
      if(comicindex==1){
        alert("This is the first chapter of this series.");
      }
      else {
        window.location.href = "/read?id=" + previouschapterid + "&index=" + index;
      }
    }
    else{
      if(comicindex==chapternumber){
        alert("This is the last chapter of this series.");
      }
      else {
        window.location.href = "/read?id=" + nextchapterid + "&index=" + index;
      }
    }
  }

  document.onkeydown = function(ev) {
    var index= /*[[${session.page.getIndexs()}]]*/ 100;
    var comicid=/*[[${session.page.getComicid()}]]*/ 100;
    var pagenumber =/*[[${session.pagenumber}]]*/ 100;
      if(ev.key=="ArrowLeft"){
        if(index==1){
          alert("This is the first page of this charpter.");
        }
        else {
          index = index - 1;
          window.location.href = "/read?id=" + comicid + "&index=" + index;
        }
      };
      if(ev.key=="ArrowRight"){
        if(index==pagenumber){
          alert("This is the last page of this charpter.");
        }
        else {
          index = index + 1;
          window.location.href = "/read?id=" + comicid + "&index=" + index;
        }
      };

  };

</script>
  </div>








<div id="pageToolbar" class="columns w-row">
  <div class="w-col w-col-2"><a id="first" th:href="@{/read(id=${session.page.getComicid()},index=1)}" class="button-15 w-button"><< First</a></div>
  <div class="w-col w-col-2"><a id="previous"  class="button-15 w-button" onmousedown="changePage2(1)">< Prev</a></div>
  <div class="w-col w-col-4">
    <select id="page2" name="field-2" class="selectPages w-select" onchange="gotoindex()">

    </select>
    <script th:inline="javascript">
      var ss= document.getElementById("page2")
      var pagenumber=/*[[${session.pagenumber}]]*/ 0;
      var index= /*[[${session.page.getIndexs()}]]*/ 0;
      var comicid=/*[[${session.page.getComicid()}]]*/ 100;
      function gotoindex(){
        window.location.href = "/read?id=" + comicid + "&index=" + (ss.selectedIndex+1);
      }
      for(var i=0;i<pagenumber;i++){
        ss.add(new Option("Page "+(i+1),""));
      }
      ss.selectedIndex=index-1;
    </script>
  </div>
  <div class="w-col w-col-2"><a id="next"   class="button-15 w-button" onmousedown="changePage2(2)">Next ></a></div>
  <div class="w-col w-col-2"><a id="last" th:href="@{/read(id=${session.page.getComicid()},index=${session.pagenumber})}" class="button-15 w-button">Last >></a></div>
</div>


<div class="collapseDiv">
  <h3>Auto Flip</h3>
  <div class="collapse_body">
    <div class="collapse_content">
      <input type="text" placeholder="Speed" id="aft"><button id="aftsub" type="submit" >Set</button>
    </div>
  </div>
</div>



<script src="js/collapse.js" type="text/javascript"></script>


<script >
  var afttext=document.getElementById("aft");
  var tempurl="/read?id=" + comicid + "&index=" + index;
  var aftsub=document.getElementById("aftsub");


  var url = location.search;
  var rq = new Object();
  if (url.indexOf("?") != -1) {
    var str = url.substr(1);
    strs = str.split("&");
    for (var i = 0; i < strs.length; i++) {
      rq[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
    }
  }
  if(rq["aft"]!=null){
    aftsub.innerHTML="Cancel";
    afttext.setAttribute("value",parseInt(rq["aft"]));
    afttext.disabled=true;
    aftsub.onclick=function(){

      location.href="/read?id=" + comicid + "&index=" + index;
    }

    if(index==pagenumber){
      alert("This is the last page of this charpter.");
    }
    else {

      setTimeout(go, parseInt(rq["aft"])*1000,"/read?id=" + comicid + "&index=" + (index+1)+"&aft="+rq["aft"]);
    }

  }else{
    aftsub.onclick=function(){
      location.href="/read" + url + "&aft=" + afttext.value;
    }
  }

  function go(url){
    location.href=url;
  }

</script>


<div id="commentDiv" class="div-block-2">
  <div id="commentHeader" class="text-block-4">Comments</div>
  <button class="collapsible">Add comment</button>
  <div class="content">
    <div class="containers">
      <form method='post' action="comicaddcomment">
        <label >Comment</label>
        <textarea id="comment" name="comment" placeholder="Great!!!" style="height:200px"></textarea>
        <input type='submit' value='Submit' />
      </form>
    </div>
  </div>
  <script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "block") {
          content.style.display = "none";
        } else {
          content.style.display = "block";
        }
      });
    }
  </script>

  <ul id="commentArea" class="list">
    <!--    <li>
          <div id="comment1" class="text-block-6">Great!!!</div>
        </li>-->
    <!--<li id="commentlist">

      <div id="chapterToolbar" class="columns1 w-row">
        <div class="w-col w-col-3">
          <img>
          <a id="previousChapter" >Previous Chapter</a>
        </div>
        <div class="w-col w-col-7">
          <div id="t" >aaa</div>
        </div>
      </div>

    </li>-->
  </ul>
  <script th:inline="javascript">
    var comiccomments=/*[[${session.comiccomments}]]*/ null;
    var commentusers=/*[[${session.comiccommentusers}]]*/ null;
    var commentimages=/*[[${session.comiccommentimages}]]*/ null;
    var commentArea=document.getElementById("commentArea");
    if(comiccomments==null || comiccomments.length==0){
      var content = document.createElement("div");
      content.setAttribute("class","text-block-6");
      content.innerHTML = "Empty";
      commentArea.appendChild(content);
    }
    else{
      for (var i = 0; i < comiccomments.length; i++) {
        var commentList=document.createElement("li");
        var row=document.createElement('div');
        row.setAttribute("class", "columns1 w-row");
        var col1=document.createElement('div');
        col1.setAttribute("class", "w-col w-col-3");

        var img = document.createElement("img");
        img.src = commentimages[i];
        img.setAttribute("height", "120");
        img.setAttribute("width", "120");
        img.alt="";
        //img.className+=" image-3";
        col1.appendChild(img);
        row.appendChild(col1);

        var br=document.createElement('BR');
        col1.appendChild(br);

        var username = document.createElement("div");
        username.setAttribute("class","text-block-6");
        username.innerHTML = "  "+commentusers[i].name;
        col1.appendChild(username);

        var date = document.createElement("div");
        date.setAttribute("class","text-block-7");
        date.innerHTML = comiccomments[i].date.substring(0,19);
        col1.appendChild(date);
        row.appendChild(col1);

        var col2=document.createElement('div');
        col2.setAttribute("class", "w-col w-col-7");

        var comment = document.createElement("div");
        comment.setAttribute("class","text-block-6");
        comment.innerHTML = comiccomments[i].content;
        col2.appendChild(comment);
        row.appendChild(col2);
        commentList.appendChild(row);
        commentArea.appendChild(commentList);
      }
    }
  </script>
</div>
<script src="https://d1tdp7z6w94jbb.cloudfront.net/js/jquery-3.3.1.min.js" type="text/javascript" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="js/webflow.js" type="text/javascript"></script>
<!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>